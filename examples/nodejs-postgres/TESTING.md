# ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ - Node.js + PostgreSQL + Reactï¼ˆåˆå¿ƒè€…å‘ã‘ï¼‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Node.js + PostgreSQL + Reactãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•ã‚’ã€åˆå¿ƒè€…ã«ã‚‚ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
- [ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•](#ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•)
- [ãƒ†ã‚¹ãƒˆã®æ§‹é€ ](#ãƒ†ã‚¹ãƒˆã®æ§‹é€ )
- [ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸](#ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ğŸ’¡ å°‚é–€ç”¨èªè§£èª¬

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ä½¿ç”¨ã™ã‚‹ç”¨èªã‚’æœ€åˆã«èª¬æ˜ã—ã¾ã™ï¼š

| ç”¨èª | æ„å‘³ |
|------|------|
| **ãƒ†ã‚¹ãƒˆ** | ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæ­£ã—ãå‹•ãã‹ç¢ºèªã™ã‚‹ä½œæ¥­ |
| **è‡ªå‹•ãƒ†ã‚¹ãƒˆ** | ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ä»•çµ„ã¿ |
| **ã‚«ãƒãƒ¬ãƒƒã‚¸** | ãƒ†ã‚¹ãƒˆã§ç¢ºèªã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®å‰²åˆï¼ˆ%ã§è¡¨ç¤ºï¼‰ |
| **Jest** | JavaScriptã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãƒ„ãƒ¼ãƒ« |
| **Supertest** | APIã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ï¼ˆHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ï¼‰ |
| **Vitest** | Reactï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ« |
| **Playwright** | ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•æ“ä½œã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ï¼ˆE2Eï¼‰ |
| **E2E** | End to End = ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’æœ€åˆã‹ã‚‰æœ€å¾Œã¾ã§å†ç¾ã™ã‚‹ãƒ†ã‚¹ãƒˆ |
| **API** | ãƒ—ãƒ­ã‚°ãƒ©ãƒ åŒå£«ãŒé€šä¿¡ã™ã‚‹ãŸã‚ã®å…¥å£ |
| **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ** | APIã®å„å…¥å£ï¼ˆä¾‹: `/auth/login`ï¼‰ |

---

## å‰ææ¡ä»¶

ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ä»¥ä¸‹ãŒæƒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

### âœ… å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

1. **Docker Desktop** - èµ·å‹•ã—ã¦ã„ã‚‹çŠ¶æ…‹
2. **Node.js 20.x** - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
3. **npm** - Node.jsã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™
4. **ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸** - `npm install` ã§å…¨ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### âœ… å®Ÿè¡Œä¸­ã®ã‚µãƒ¼ãƒ“ã‚¹

5. **PostgreSQLã‚³ãƒ³ãƒ†ãƒŠ** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒãƒ¼ãƒˆ5433ï¼‰
6. **Redisã‚³ãƒ³ãƒ†ãƒŠ** - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ6379ï¼‰
7. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼** - `http://localhost:3000` ã§èµ·å‹•
8. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼** - `http://localhost:5173` ã§èµ·å‹•ï¼ˆE2Eãƒ†ã‚¹ãƒˆæ™‚ï¼‰

### ğŸ“ åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

```bash
# 1. VSCodeã§Dev Containerã‚’é–‹ã
# F1ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã€ŒDev Containers: Reopen in Containerã€ã‚’é¸æŠ

# 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–
npm run db:setup

# 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆ2ã¤ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œï¼‰
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1:
npm run server:dev   # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ3000ï¼‰

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2:
npm run client:dev   # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ5173ï¼‰
```

---

## ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ãƒ†ã‚¹ãƒˆç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ `npm install` ã§è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚
ã‚‚ã—æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆï¼š

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆç”¨
npm install --save-dev jest @types/jest ts-jest supertest @types/supertest

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆç”¨
npm install --save-dev vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom

# E2Eãƒ†ã‚¹ãƒˆç”¨
npm install --save-dev @playwright/test
```

### Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**ğŸ’¡ Playwright**: å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChromeã€Firefoxã€Safariãªã©ï¼‰ã‚’è‡ªå‹•æ“ä½œã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«

```bash
# Chromiumãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœ€ã‚‚è»½é‡ï¼‰
npx playwright install chromium

# å…¨ã¦ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆ
npx playwright install
```

---

## ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•

### ğŸ§ª ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆï¼ˆJest + Supertestï¼‰

**ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ï¼Ÿ**: ã‚µãƒ¼ãƒãƒ¼å´ã®APIã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œã€èªè¨¼æ©Ÿèƒ½

#### åŸºæœ¬çš„ãªå®Ÿè¡Œæ–¹æ³•

```bash
# å…¨ã¦ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# å®Ÿè¡Œã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆã®ä¾‹:
# âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²APIãŒå‹•ãã‹
# âœ… ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ãŒå–å¾—ã§ãã‚‹ã‹
# âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ­£ã—ãä¿å­˜ã•ã‚Œã‚‹ã‹
```

#### ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã¨è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆã‚’å†å®Ÿè¡Œï¼ˆé–‹ç™ºä¸­ã«ä¾¿åˆ©ï¼‰
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆï¼ˆã©ã“ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèªï¼‰
npm run test:coverage

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã ã‘å®Ÿè¡Œ
npm test -- tests/auth.test.ts

# ãƒ†ã‚¹ãƒˆåã§çµã‚Šè¾¼ã¿
npm test -- --testNamePattern="POST /auth/register"
```

**ğŸ’¡ ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ**: ãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®å‰²åˆã‚’è¡¨ç¤ºã€‚
ç·‘è‰²=ãƒ†ã‚¹ãƒˆæ¸ˆã¿ã€èµ¤è‰²=æœªãƒ†ã‚¹ãƒˆã®è¡ŒãŒä¸€ç›®ã§ã‚ã‹ã‚Šã¾ã™ã€‚

### ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰

**ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ï¼Ÿ**: Reactç”»é¢ã€ãƒœã‚¿ãƒ³ã€ãƒ•ã‚©ãƒ¼ãƒ ã®å‹•ä½œ

```bash
# å…¨ã¦ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:client

# å®Ÿè¡Œã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆã®ä¾‹:
# âœ… ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹
# âœ… ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰é–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹ã‹
# âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹
```

#### ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã«è‡ªå‹•å†å®Ÿè¡Œ
npm run test:client:watch

# ãƒ–ãƒ©ã‚¦ã‚¶ã§GUIã‚’é–‹ã„ã¦ãƒ†ã‚¹ãƒˆï¼ˆè¦–è¦šçš„ã«ç¢ºèªã§ãã‚‹ï¼‰
npx vitest --config client/vitest.config.ts --ui
```

### ğŸŒ E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰

**ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ï¼Ÿ**: å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’å†ç¾

**âš ï¸ é‡è¦**: E2Eãƒ†ã‚¹ãƒˆã®å‰ã«ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¸¡æ–¹ã‚’èµ·å‹•ã—ã¦ãã ã•ã„ï¼

```bash
# E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œï¼‰
npm run test:e2e

# å®Ÿè¡Œã•ã‚Œã‚‹ãƒ†ã‚¹ãƒˆã®ä¾‹:
# âœ… ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’é–‹ã â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ› â†’ ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
# âœ… ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ â†’ ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹
```

#### ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã®UIã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œï¼ˆå‹•ä½œã‚’ç›®ã§è¦‹ã¦ç¢ºèªï¼‰
npm run test:e2e:ui

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã ã‘å®Ÿè¡Œ
npx playwright test tests/e2e/auth.spec.ts

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œï¼ˆãƒ‡ãƒãƒƒã‚°ã«ä¾¿åˆ©ï¼‰
npx playwright test --headed

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆä¸€æ™‚åœæ­¢ã—ãªãŒã‚‰ç¢ºèªï¼‰
npx playwright test --debug
```

### ğŸš€ å…¨ãƒ†ã‚¹ãƒˆä¸€æ‹¬å®Ÿè¡Œ

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ + ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ + E2E ã‚’é †ç•ªã«å®Ÿè¡Œ
npm run test:all

# å®Ÿè¡Œé †åº:
# 1. npm testï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰
# 2. npm run test:clientï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
# 3. npm run test:e2eï¼ˆE2Eï¼‰
```

---

## ãƒ†ã‚¹ãƒˆã®æ§‹é€ 

### ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
examples/nodejs-postgres/
â”œâ”€â”€ tests/                          # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ setup.ts                    # ãƒ†ã‚¹ãƒˆå…¨ä½“ã®è¨­å®š
â”‚   â”œâ”€â”€ auth.test.ts                # èªè¨¼æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆï¼ˆ15ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â”œâ”€â”€ users.test.ts               # ãƒ¦ãƒ¼ã‚¶ãƒ¼APIã®ãƒ†ã‚¹ãƒˆï¼ˆ10ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â”œâ”€â”€ items.test.ts               # ã‚¢ã‚¤ãƒ†ãƒ APIã®ãƒ†ã‚¹ãƒˆï¼ˆ14ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â”œâ”€â”€ health.test.ts              # æ¥ç¶šç¢ºèªã®ãƒ†ã‚¹ãƒˆï¼ˆ5ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â””â”€â”€ e2e/                        # E2Eãƒ†ã‚¹ãƒˆ
â”‚       â””â”€â”€ auth.spec.ts            # ãƒ­ã‚°ã‚¤ãƒ³æ“ä½œã®ãƒ†ã‚¹ãƒˆï¼ˆ10ã‚±ãƒ¼ã‚¹ï¼‰
â”œâ”€â”€ client/src/
â”‚   â”œâ”€â”€ __tests__/                  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ api.test.ts             # APIé–¢æ•°ã®ãƒ†ã‚¹ãƒˆï¼ˆ11ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â”‚   â””â”€â”€ Login.test.tsx          # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ãƒ†ã‚¹ãƒˆï¼ˆ10ã‚±ãƒ¼ã‚¹ï¼‰
â”‚   â””â”€â”€ test-setup.ts               # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã®è¨­å®š
â”œâ”€â”€ jest.config.js                  # Jestã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ playwright.config.ts            # Playwrightã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ client/vitest.config.ts         # Vitestã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

### ğŸ“š å„ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹

#### **tests/auth.test.ts**ï¼ˆèªè¨¼ãƒ†ã‚¹ãƒˆ: 15ã‚±ãƒ¼ã‚¹ï¼‰

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¨ãƒ­ã‚°ã‚¤ãƒ³ãŒæ­£ã—ãå‹•ãã‹ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç™»éŒ²ã§ãã‚‹
- âœ… åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼åã§ã¯ç™»éŒ²ã§ããªã„
- âœ… æ­£ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
- âœ… é–“é•ã£ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã¯ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„
- âœ… ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆãƒ­ã‚°ã‚¤ãƒ³è¨¼æ˜ï¼‰ãŒæ­£ã—ãç™ºè¡Œã•ã‚Œã‚‹
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæš—å·åŒ–ã•ã‚Œã¦ä¿å­˜ã•ã‚Œã‚‹

**ğŸ’¡ bcrypt**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æš—å·åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚
`password123` â†’ `$2b$10$abc...xyz` ã®ã‚ˆã†ã«å¤‰æ›ã—ã¦å®‰å…¨ã«ä¿å­˜ã—ã¾ã™ã€‚

#### **tests/users.test.ts**ï¼ˆUsers API: 10ã‚±ãƒ¼ã‚¹ï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ãŒæ­£ã—ãå‹•ãã‹ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… `GET /api/users` ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—ã§ãã‚‹
- âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒšãƒ¼ã‚¸åˆ†å‰²ï¼‰ãŒå‹•ã
- âœ… ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—ã§ãã‚‹
- âœ… èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œãªã„ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰

**ğŸ’¡ ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ‡ãƒ¼ã‚¿ãŒå¤šã„æ™‚ã€10ä»¶ãšã¤ãªã©ã«åˆ†ã‘ã¦è¡¨ç¤ºã™ã‚‹ä»•çµ„ã¿ã€‚
ä¾‹: `?page=1&per_page=10`ï¼ˆ1ãƒšãƒ¼ã‚¸ç›®ã€10ä»¶ãšã¤ï¼‰

#### **tests/items.test.ts**ï¼ˆItems API: 14ã‚±ãƒ¼ã‚¹ï¼‰

ã‚¢ã‚¤ãƒ†ãƒ ã®ä½œæˆãƒ»å–å¾—ãŒæ­£ã—ãå‹•ãã‹ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… `POST /api/items` ã§æ–°ã—ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆã§ãã‚‹
- âœ… ã‚¢ã‚¤ãƒ†ãƒ ä¸€è¦§ã‚’å–å¾—ã§ãã‚‹
- âœ… ç‰¹å®šã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å–å¾—ã§ãã‚‹
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚‚å‰Šé™¤ã•ã‚Œã‚‹ï¼ˆã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤ï¼‰
- âœ… ä¾¡æ ¼ãŒæ•°å€¤ã¨ã—ã¦æ­£ã—ãä¿å­˜ã•ã‚Œã‚‹

**ğŸ’¡ ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤**: è¦ªãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€å­ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¢ã‚¤ãƒ†ãƒ ï¼‰ã‚‚è‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã‚‹ä»•çµ„ã¿ã€‚

#### **tests/health.test.ts**ï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: 5ã‚±ãƒ¼ã‚¹ï¼‰

ã‚µãƒ¼ãƒãƒ¼ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ¥ç¶šç¢ºèªã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… `GET /health` ã§ã‚µãƒ¼ãƒãƒ¼ãŒå‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèª
- âœ… PostgreSQLã«æ¥ç¶šã§ãã‚‹ã‹ç¢ºèª
- âœ… Redisã«æ¥ç¶šã§ãã‚‹ã‹ç¢ºèª
- âœ… å­˜åœ¨ã—ãªã„URLã¯404ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

#### **client/src/__tests__/api.test.ts**ï¼ˆAPIé–¢æ•°: 11ã‚±ãƒ¼ã‚¹ï¼‰

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®APIå‘¼ã³å‡ºã—é–¢æ•°ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… ãƒˆãƒ¼ã‚¯ãƒ³ã‚’localStorageã«ä¿å­˜ã§ãã‚‹
- âœ… ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã§ãã‚‹
- âœ… ãƒ­ã‚°ã‚¤ãƒ³é–¢æ•°ãŒæ­£ã—ãå‹•ã
- âœ… ç™»éŒ²é–¢æ•°ãŒæ­£ã—ãå‹•ã

**ğŸ’¡ localStorage**: ãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹å ´æ‰€ã€‚
ãƒ­ã‚°ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ãªã©ã‚’ä¿å­˜ã—ã¦ã€ãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ã¦ã‚‚æ¶ˆãˆãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

#### **client/src/__tests__/Login.test.tsx**ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ç”»é¢: 10ã‚±ãƒ¼ã‚¹ï¼‰

ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã§ãã‚‹
- âœ… ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹
- âœ… ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹

#### **tests/e2e/auth.spec.ts**ï¼ˆE2Eãƒ†ã‚¹ãƒˆ: 10ã‚±ãƒ¼ã‚¹ï¼‰

å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’å†ç¾ã—ã¦ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

**ãƒ†ã‚¹ãƒˆå†…å®¹ã®ä¾‹**:
- âœ… ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² â†’ ãƒ­ã‚°ã‚¤ãƒ³ â†’ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºã®æµã‚Œ
- âœ… ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆã§ãã‚‹
- âœ… ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã§ãã‚‹

---

## ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### ã‚«ãƒãƒ¬ãƒƒã‚¸ã¨ã¯ï¼Ÿ

**ã‚«ãƒãƒ¬ãƒƒã‚¸**ã¯ã€ãƒ†ã‚¹ãƒˆã«ã‚ˆã£ã¦å®Ÿéš›ã«å®Ÿè¡Œã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®å‰²åˆã§ã™ã€‚

- **75%ã®ã‚«ãƒãƒ¬ãƒƒã‚¸** = ã‚³ãƒ¼ãƒ‰ã®75%ãŒãƒ†ã‚¹ãƒˆã§ç¢ºèªã•ã‚ŒãŸ
- é«˜ã„ã»ã©è‰¯ã„ã§ã™ãŒã€100%ã«ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®ç¢ºèªæ–¹æ³•

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
npm run test:coverage

# å®Ÿè¡Œçµæœã®ä¾‹:
# âœ… auth.ts: 95.2%
# âœ… users.ts: 88.7%
# âš ï¸  items.ts: 72.1%
```

### HTMLãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§è¦‹ã‚‹

```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå¾Œã€ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
open coverage/index.html      # macOS
xdg-open coverage/index.html  # Linux
start coverage/index.html     # Windows
```

**ãƒ¬ãƒãƒ¼ãƒˆã®è¦‹æ–¹**:
- **ç·‘è‰²ã®è¡Œ**: ãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚ŒãŸ âœ…
- **èµ¤è‰²ã®è¡Œ**: ãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã¦ã„ãªã„ âŒ
- **é»„è‰²ã®è¡Œ**: ä¸€éƒ¨ã ã‘å®Ÿè¡Œã•ã‚ŒãŸï¼ˆæ¡ä»¶åˆ†å²ãªã©ï¼‰

### ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸

| é ˜åŸŸ | ç›®æ¨™ |
|------|------|
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å…¨ä½“ | 75%ä»¥ä¸Š |
| èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | 90%ä»¥ä¸Š |
| APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | 100% |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 70%ä»¥ä¸Š |

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•ï¼‰

### å•é¡Œ1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶šã§ããªã„

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**:
```
ECONNREFUSED ::1:5433
Error: connect ECONNREFUSED 127.0.0.1:5433
```

**åŸå› **: PostgreSQLã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# 1. ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ã‚’ç¢ºèª
docker compose ps

# 2. dbã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ãªã„å ´åˆã€èµ·å‹•ã™ã‚‹
docker compose up -d db

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–
npm run db:setup

# 4. æ¥ç¶šç¢ºèª
curl http://localhost:3000/db
```

### å•é¡Œ2: Redisã«æ¥ç¶šã§ããªã„

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**:
```
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
```

**è§£æ±ºæ–¹æ³•**:
```bash
# Redisã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ã‚’ç¢ºèª
docker compose ps redis

# èµ·å‹•ã—ã¦ã„ãªã„å ´åˆ
docker compose up -d redis

# æ¥ç¶šç¢ºèª
curl http://localhost:3000/redis
```

### å•é¡Œ3: ãƒ†ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**:
```
Timeout - Async callback was not invoked within the 5000 ms timeout
```

**åŸå› **: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶šã‚„å‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:

`tests/setup.ts` ã‚’ç¢ºèªãƒ»ç·¨é›†:
```typescript
// ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’30ç§’ã«å»¶é•·
jest.setTimeout(30000);
```

ã¾ãŸã¯ã€å€‹åˆ¥ã®ãƒ†ã‚¹ãƒˆã§å»¶é•·:
```typescript
it('should do something', async () => {
  // ã“ã®ãƒ†ã‚¹ãƒˆã ã‘60ç§’ã«å»¶é•·
  jest.setTimeout(60000);
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
}, 60000); // â†ã“ã“ã«ã‚‚æŒ‡å®š
```

### å•é¡Œ4: Playwrightã®ãƒ–ãƒ©ã‚¦ã‚¶ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**:
```
browserType.launch: Executable doesn't exist
```

**è§£æ±ºæ–¹æ³•**:
```bash
# Playwrightã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install chromium

# ã¾ãŸã¯å…¨ã¦ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install
```

### å•é¡Œ5: E2Eãƒ†ã‚¹ãƒˆã§ã€ŒTarget page closedã€ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**:
```
Target page, context or browser has been closed
```

**åŸå› **: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
```bash
# 2ã¤ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1:
npm run server:dev

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2:
npm run client:dev

# ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ãŸã‚‰ã€åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«3:
npm run test:e2e
```

### å•é¡Œ6: ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**:
```
EADDRINUSE: address already in use :::3000
```

**åŸå› **: ãƒãƒ¼ãƒˆ3000ã‚’ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒã‚ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
# macOS/Linux: ãƒãƒ¼ãƒˆ3000ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
lsof -i :3000

# å‡ºåŠ›ä¾‹:
# COMMAND   PID   USER
# node    12345  username

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
kill -9 12345

# Windows: ãƒãƒ¼ãƒˆç¢ºèª
netstat -ano | findstr :3000

# ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†
taskkill /PID <ãƒ—ãƒ­ã‚»ã‚¹ID> /F
```

### å•é¡Œ7: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã£ã¦ã„ã‚‹

**ç—‡çŠ¶**: ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã€ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

**åŸå› **: å‰å›ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ®‹ã£ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
docker compose exec db psql -U postgres -d myapp -c "
DELETE FROM items;
DELETE FROM users WHERE username LIKE 'testuser_%' OR username LIKE 'apiuser_%';
"

# ã¾ãŸã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ã—ç›´ã™
npm run db:setup
```

---

## æ–°ã—ã„ãƒ†ã‚¹ãƒˆã‚’æ›¸ãæ–¹æ³•

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã®ä¾‹

```typescript
// tests/my-feature.test.ts
import request from 'supertest';
import { Pool } from 'pg';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL || 'postgresql://postgres:postgres@localhost:5433/myapp',
});

describe('ç§ã®æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ', () => {
  let authToken: string;
  let testUserId: number;

  // ãƒ†ã‚¹ãƒˆå‰ã®æº–å‚™
  beforeAll(async () => {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç™»éŒ²ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
    const response = await request('http://localhost:3000')
      .post('/auth/register')
      .send({
        username: `testuser_${Date.now()}`,
        email: `test_${Date.now()}@example.com`,
        password: 'password123',
      });

    authToken = response.body.access_token;
    testUserId = response.body.user.id;
  });

  // ãƒ†ã‚¹ãƒˆå¾Œã®å¾Œç‰‡ä»˜ã‘
  afterAll(async () => {
    if (testUserId) {
      await pool.query('DELETE FROM users WHERE id = $1', [testUserId]);
    }
    await pool.end();
  });

  // å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆ
  it('ä½•ã‹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹', async () => {
    const response = await request('http://localhost:3000')
      .get('/api/my-endpoint')
      .set('Authorization', `Bearer ${authToken}`)
      .expect(200);

    expect(response.body).toHaveProperty('data');
  });
});
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã®ä¾‹

```typescript
// client/src/__tests__/MyComponent.test.tsx
import { describe, it, expect, vi } from 'vitest';
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import MyComponent from '../components/MyComponent';

describe('MyComponent', () => {
  it('æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', () => {
    render(<MyComponent />);
    expect(screen.getByText('æœŸå¾…ã™ã‚‹æ–‡å­—')).toBeInTheDocument();
  });

  it('ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å‹•ä½œã™ã‚‹', async () => {
    const mockCallback = vi.fn();
    render(<MyComponent onAction={mockCallback} />);

    await userEvent.click(screen.getByRole('button'));
    expect(mockCallback).toHaveBeenCalled();
  });
});
```

### E2Eãƒ†ã‚¹ãƒˆã®ä¾‹

```typescript
// tests/e2e/my-flow.spec.ts
import { test, expect } from '@playwright/test';

test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ', async ({ page }) => {
  // ãƒšãƒ¼ã‚¸ã‚’é–‹ã
  await page.goto('/');

  // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  await page.getByRole('button', { name: 'ã‚¯ãƒªãƒƒã‚¯' }).click();

  // çµæœã‚’ç¢ºèª
  await expect(page.getByText('æˆåŠŸ')).toBeVisible();
});
```

---

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼ˆè‰¯ã„æ›¸ãæ–¹ï¼‰

1. **ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã•ã›ã‚‹**
   - å„ãƒ†ã‚¹ãƒˆã¯ä»–ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ãªã„
   - ãƒ†ã‚¹ãƒˆAãŒå¤±æ•—ã—ã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆBã¯å®Ÿè¡Œã§ãã‚‹

2. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯å¿…ãšã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**
   - `afterAll` ã‚„ `afterEach` ã§å‰Šé™¤
   - æ¬¡ã®ãƒ†ã‚¹ãƒˆã«å½±éŸ¿ã‚’ä¸ãˆãªã„

3. **ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼åã« `Date.now()` ã‚’ä»˜ã‘ã‚‹
   - ä¾‹: `testuser_1700000000`

4. **async/await ã‚’ä½¿ã†**
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„APIã¯éåŒæœŸå‡¦ç†
   - å¿…ãš `await` ã‚’ä»˜ã‘ã‚‹

5. **ãƒ†ã‚¹ãƒˆåã‚’ã‚ã‹ã‚Šã‚„ã™ã**
   - âŒ `test 1`
   - âœ… `ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãŒæˆåŠŸã™ã‚‹`

6. **ãƒ†ã‚¹ãƒˆã®æ§‹é€ : AAA ãƒ‘ã‚¿ãƒ¼ãƒ³**
   ```typescript
   it('ä½•ã‹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹', async () => {
     // Arrangeï¼ˆæº–å‚™ï¼‰: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„
     const testData = { ... };

     // Actï¼ˆå®Ÿè¡Œï¼‰: å®Ÿéš›ã«å‡¦ç†ã‚’å®Ÿè¡Œ
     const response = await doSomething(testData);

     // Assertï¼ˆæ¤œè¨¼ï¼‰: çµæœã‚’ç¢ºèª
     expect(response.status).toBe(200);
   });
   ```

---

## å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆæ—¥æœ¬èªï¼‰

- [Jestï¼ˆæ—¥æœ¬èªï¼‰](https://jestjs.io/ja/)
- [Vitest](https://vitest.dev/)
- [Playwright](https://playwright.dev/)
- [React Testing Library](https://testing-library.com/react)

### å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

- [JavaScriptãƒ†ã‚¹ãƒˆå…¥é–€](https://jsprimer.net/basic/testing/)
- [TypeScriptå…¬å¼](https://www.typescriptlang.org/ja/)

---

## ã‚µãƒãƒ¼ãƒˆ

- **è©³ç´°ãªãƒ†ã‚¹ãƒˆè¨ˆç”»**: [TEST_PLAN.md](../../TEST_PLAN.md) ã‚’å‚ç…§
- **å•é¡ŒãŒè§£æ±ºã—ãªã„**: GitHubã®Issueã§è³ªå•ã—ã¦ãã ã•ã„

---

**æœ€çµ‚æ›´æ–°**: 2025-11-22
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0ï¼ˆåˆå¿ƒè€…å‘ã‘æ—¥æœ¬èªç‰ˆï¼‰
