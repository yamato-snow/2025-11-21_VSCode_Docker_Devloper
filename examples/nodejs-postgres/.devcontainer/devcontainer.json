{
  "name": "Node.js Fullstack Development",

  // Docker Composeã‚’ä½¿ç”¨
  "dockerComposeFile": "docker-compose.yml",
  "service": "app",
  "workspaceFolder": "/workspace",

  // ãƒãƒ¼ãƒˆè»¢é€ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ï¼‰
  "forwardPorts": [3000, 5173, 5433, 6379],
  "portsAttributes": {
    "3000": {
      "label": "Backend API (Express)",
      "onAutoForward": "notify"
    },
    "5173": {
      "label": "Frontend (Vite + React)",
      "onAutoForward": "notify"
    },
    "5433": {
      "label": "PostgreSQL Database",
      "onAutoForward": "silent"
    },
    "6379": {
      "label": "Redis Cache",
      "onAutoForward": "silent"
    }
  },

  // Dev Container Featuresï¼ˆè¿½åŠ ãƒ„ãƒ¼ãƒ«ï¼‰
  "features": {
    // GitHub CLI
    "ghcr.io/devcontainers/features/github-cli:1": {
      "version": "latest"
    },
    // AWS CLIï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
    // "ghcr.io/devcontainers/features/aws-cli:1": {
    //   "version": "latest"
    // }
  },

  // VSCodeã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  "customizations": {
    "vscode": {
      // ã‚³ãƒ³ãƒ†ãƒŠå†…ã«è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹æ‹¡å¼µæ©Ÿèƒ½
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "ms-azuretools.vscode-docker",
        "prisma.prisma",
        "mtxr.sqltools",
        "mtxr.sqltools-driver-pg",
        "bradlc.vscode-tailwindcss",
        "ms-vscode.vscode-typescript-React",
        "dsznajder.es7-react-js-snippets",
        "formulahendry.auto-rename-tag"
      ],

      // ã‚¨ãƒ‡ã‚£ã‚¿è¨­å®š
      "settings": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": "explicit"
        },
        "[typescript]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[json]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },

        // SQLToolsè¨­å®šï¼ˆPostgreSQLæ¥ç¶šï¼‰
        "sqltools.connections": [
          {
            "name": "PostgreSQL Local",
            "driver": "PostgreSQL",
            "server": "db",
            "port": 5433,
            "database": "myapp",
            "username": "postgres",
            "password": "postgres"
          }
        ],

        // ã‚¿ãƒ¼ãƒŸãƒŠãƒ«è¨­å®š
        "terminal.integrated.defaultProfile.linux": "bash",

        // TypeScriptè¨­å®š
        "typescript.updateImportsOnFileMove.enabled": "always",
        "typescript.suggest.autoImports": true
      }
    }
  },

  // ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚³ãƒãƒ³ãƒ‰
  // ã‚³ãƒ³ãƒ†ãƒŠä½œæˆç›´å¾Œã«1å›ã ã‘å®Ÿè¡Œï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ï¼‰
  // NOTE: npm installã¨ã®ç«¶åˆã‚’é¿ã‘ã‚‹ãŸã‚ã€æ‰‹å‹•å®Ÿè¡Œã«å¤‰æ›´
  // åˆå›èµ·å‹•å¾Œã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ `npm run db:setup` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
  // "postCreateCommand": "npm run db:setup",

  // ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•å¾Œã«æ¯å›å®Ÿè¡Œ
  "postStartCommand": "echo 'ğŸ”„ Container started. npm run dev is running automatically.'",

  // ã‚³ãƒ³ãƒ†ãƒŠæ¥ç¶šå¾Œã«å®Ÿè¡Œ
  "postAttachCommand": "echo 'âœ… Dev Container is ready!\nğŸš€ Backend + Frontend auto-started\nğŸ”— Backend: http://localhost:3000\nâš›ï¸  Frontend: http://localhost:5173\n\nâš ï¸  åˆå›èµ·å‹•æ™‚ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„:\n   npm run db:setup'",

  // ã‚³ãƒ³ãƒ†ãƒŠå†…ã®å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼
  "remoteUser": "root",

  // VSCodeçµ‚äº†æ™‚ã«Docker Composeã‚’åœæ­¢
  "shutdownAction": "stopCompose"
}
